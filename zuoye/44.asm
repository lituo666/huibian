DATA SEGMENT
	BUF DB 6
		DB ?
		DB 6 DUP(?)
	CUOWU DB 'Input Error!$'
	
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,DS:DATA
	START:
		MOV AX,DATA
		MOV DS,AX
		
		MOV DX,OFFSET BUF
		MOV AH,10
		INT 21H
		
		MOV BX,OFFSET BUF
		ADD BX,2
		MOV CL,4
	J1:
		MOV AL,BYTE PTR[BX]
		CMP AL,'0'
		JAE J3		;大于等于
		JMP CUO
	J3:	
		CMP AL,'9'
		JA ZIMU
		SUB AL,'0'
		MOV AH,0
		PUSH AX
		INC BX
		DEC CL
		JNZ J1
		JMP XIAN
	ZIMU:
		CMP AL,'a'
		JAE J4		;大于等于
		JMP CUO
	J4:
		CMP AL,'f'
		JBE J5		;小于等于
		JMP CUO
	J5:
		SUB AL,'a'
		ADD AL,10
		MOV AH,0
		PUSH AX
		INC BX
		DEC CL
		JNZ J1
		JMP XIAN
	XIAN:
		MOV BX,OFFSET BUF
		ADD BX,2	
		MOV DL,BYTE PTR[BX]
		MOV AH,2
		INT 21H
		MOV DL,'+'
		MOV AH,2
		INT 21H
		MOV DL,BYTE PTR[BX+1]
		MOV AH,2
		INT 21H
		MOV DL,'+'
		MOV AH,2
		INT 21H
		MOV DL,BYTE PTR[BX+2]
		MOV AH,2
		INT 21H
		MOV DL,'+'
		MOV AH,2
		INT 21H
		MOV DL,BYTE PTR[BX+3]
		MOV AH,2
		INT 21H
		MOV DL,'='
		MOV AH,2
		INT 21H
		
		MOV AX,0
		POP BX
		ADD AX,BX
		POP BX
		ADD AX,BX
		POP BX
		ADD AX,BX
		POP BX
		ADD AX,BX
		MOV CL,4
		PUSH AX
	J2:	
		POP AX
		PUSH AX
		MOV BL,AL
		CMP CL,0
		JNZ J6
		AND BL,0FH
		JMP J7
	J6:	
		SHR BL,CL
	J7:	
		CMP BL,9
		JA ZIMU2
		OR BL,30H
		MOV DL,BL
		MOV AH,2
		INT 21H
		CMP CL,0
		JZ NEXT
		MOV CL,0
		JMP J2
	ZIMU2:	
		SUB BL,9
		OR BL,60H
		MOV DL,BL
		MOV AH,2
		INT 21H
		CMP CL,0
		JZ NEXT
		MOV CL,0
		JMP J2
	CUO:
		MOV DX,OFFSET CUOWU
		MOV AH,9
		INT 21H
	NEXT:
		MOV AH,4CH
		INT 21H
CODE ENDS
	END START

